backend:
  name: git-gateway
  branch: main

media_folder: "img"
public_folder: "/img"

collections:
  # ---------------------------------------------------------
  # HLAVNÍ KOLEKCE PRODUKTŮ
  # ---------------------------------------------------------
  - name: "productos"
    label: "Productos"
    folder: "data/productos"
    create: true
    slug: "{{slug}}"
    extension: "json"
    format: "json"

    fields:
      - { label: "Nombre", name: "nombre", widget: "string" }

      - label: "Slug"
        name: "slug"
        widget: "string"
        required: false
        hint: "Se generará automáticamente si se deja vacío."

      - { label: "ID", name: "id", widget: "string", required: false }

      - { label: "Precio", name: "precio", widget: "string" }

      - label: "Descripción"
        name: "descripcion"
        widget: "markdown"
        modes: ["rich_text", "raw"]
        hint: "Puedes usar Markdown y HTML."

      - { label: "Imagen principal", name: "imagen", widget: "image" }

      - label: "Categoría"
        name: "categoria"
        widget: "select"
        options:
          - { label: "Powerbanks", value: "powerbanks" }
          - { label: "Paneles", value: "paneles" }
          - { label: "Luces", value: "luces" }
          - { label: "Sistemas", value: "sistemas" }

  # ---------------------------------------------------------
  # GALERIE UVNITŘ PRODUKTU (HROMADNÝ UPLOAD)
  # ---------------------------------------------------------
  - name: "galeria"
    label: "Galería de productos"
    folder: "data/productos"
    create: false
    nested:
      depth: 2
    filter:
      field: "type"
      value: "galeria"

    fields:
      - { label: "Tipo", name: "type", widget: "hidden", default: "galeria" }

      - label: "Imágenes"
        name: "imagenes"
        widget: "image"
        allow_multiple: true
        media_folder: "data/productos/{{slug}}/galeria"
        public_folder: "/data/productos/{{slug}}/galeria"
